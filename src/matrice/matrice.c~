#include "matrice.h"
#include <assert.h>
#include <stdlib.h>
#include <stdio.h>

int getIndiceXY(int x, int y, Matrice m){
  int ind = y * (m->largeur) + x;
  assert(ind >= 0 && ind < m->tailleMat); 
  return(ind);
}

Matrice initMatrice(int largeur, int hauteur){
  Matrice m = malloc(sizeof(struct matrice));
  m->tailleMat = largeur*hauteur;
  m->largeur = largeur;
  m->hauteur = hauteur;
  m->mat = malloc(sizeof(int)*m->tailleMat);
  int i;
  for(i = 0; i < m->tailleMat; i++)
    m->mat[i] = 0;

  return m;
}

int getLargeurMatrice(Matrice m){
  return m->largeur;
}

int getHauteurMatrice(Matrice m){
  return m->hauteur;
}

int getTailleMatrice(Matrice m){
  return m->tailleMat;
}

int getCell(int x, int y, Matrice m){
  return(m->mat[getIndiceXY(x,y,m)]);
}

int setCell(int x, int y, Matrice m, int val){
  m->mat[getIndiceXY(x,y,m)] = val;
}

void showMatrice(Matrice m){
  printf("Matrice %d x %d :\n",m->largeur,m->hauteur);
  int i;
  for(i = 0; i < m->tailleMat; i++){
    printf(" %d",m->mat[i]);
    if(i%(m->largeur) == 1)
      printf("\n");
  }
}

void deleteMatrice(Matrice m){
  free(m->mat);
  free(m);
}
